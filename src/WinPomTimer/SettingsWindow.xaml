<Window x:Class="WinPomTimer.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="設定"
        Width="520"
        Height="650"
        ResizeMode="CanResizeWithGrip"
        WindowStartupLocation="CenterOwner"
        Background="#FFF6F7FB"
        FontFamily="Yu Gothic UI">
  <Window.Resources>
    <Style TargetType="TextBox">
      <Setter Property="Margin" Value="0,4,0,8" />
      <Setter Property="Padding" Value="8,6" />
      <Setter Property="BorderBrush" Value="#FFC9D0DE" />
      <Setter Property="BorderThickness" Value="1" />
    </Style>
    <Style TargetType="CheckBox">
      <Setter Property="Margin" Value="0,4,0,8" />
    </Style>
  </Window.Resources>

  <DockPanel Margin="14">
    <StackPanel DockPanel.Dock="Bottom"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Margin="0,12,0,0">
      <Button Width="100" Margin="0,0,8,0" Content="キャンセル" Click="Cancel_Click" />
      <Button Width="120" Content="保存" Click="Save_Click" />
    </StackPanel>

    <TabControl Background="White">
      <TabItem Header="タイマー">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="14">
            <TextBlock FontWeight="SemiBold" Text="時間設定" />
            <TextBlock Text="作業時間 (分)" />
            <TextBox x:Name="WorkMinutesBox" />
            <TextBlock Text="短い休憩 (分)" />
            <TextBox x:Name="ShortBreakMinutesBox" />
            <TextBlock Text="長い休憩 (分)" />
            <TextBox x:Name="LongBreakMinutesBox" />
            <TextBlock Text="長休憩の間隔 (サイクル)" />
            <TextBox x:Name="LongBreakIntervalBox" />

            <TextBlock Margin="0,8,0,0" FontWeight="SemiBold" Text="自動遷移" />
            <CheckBox x:Name="AutoStartBreakCheck" Content="作業終了後に休憩を自動開始" />
            <CheckBox x:Name="AutoStartWorkCheck" Content="休憩終了後に作業を自動開始" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <TabItem Header="音">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="14">
            <CheckBox x:Name="MuteAllCheck" Content="すべてミュート" />
            <CheckBox x:Name="SystemNotificationsCheck" Content="Windows通知を表示" />
            <TextBlock Text="全体音量 (%)" />
            <TextBox x:Name="MasterVolumeBox" />
            <TextBlock Text="休憩終了前通知 (秒)" />
            <TextBox x:Name="PreAlertSecondsBox" />

            <TextBlock Margin="0,8,0,0" FontWeight="SemiBold" Text="秒針音" />
            <CheckBox x:Name="TickEnabledCheck" Content="秒針音を有効化" />
            <TextBlock Text="秒針音量 (%)" />
            <TextBox x:Name="TickVolumeBox" />
            <TextBlock Text="秒針の再生モード" />
            <ComboBox x:Name="TickModeCombo" Margin="0,4,0,8" SelectedIndex="0">
              <ComboBoxItem Content="作業中のみ" />
              <ComboBoxItem Content="全セッション" />
            </ComboBox>

            <TextBlock Text="秒針音ファイル (.wav)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right" Width="70" Margin="6,0,0,0" Content="参照" Click="BrowseTickSound_Click" />
              <TextBox x:Name="TickSoundPathBox" Margin="0" />
            </DockPanel>
            <Button Width="180" Content="デフォルト秒針音を設定" Click="GenerateTickSound_Click" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <TabItem Header="表示">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="14">
            <CheckBox x:Name="AlwaysOnTopCheck" Content="常に最前面に表示" />
            <CheckBox x:Name="MouseLeaveOpacityCheck" Content="マウスが離れたら時計のみ表示" />
            <TextBlock Text="透過度 (0.1 - 1.0)" />
            <TextBox x:Name="MouseLeaveOpacityBox" />

            <TextBlock Margin="0,8,0,0" FontWeight="SemiBold" Text="カラー" />
            <TextBlock Text="時計背景色 (HEX)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right" Width="70" Margin="6,0,0,0" Content="選択" Click="PickShellColor_Click" />
              <TextBox x:Name="ShellColorBox" Margin="0" />
            </DockPanel>
            <TextBlock Text="時計背景透明度 (0.1 - 1.0)" />
            <TextBox x:Name="ShellOpacityBox" />
            <TextBlock Text="メーター色 (HEX)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right" Width="70" Margin="6,0,0,0" Content="選択" Click="PickMeterColor_Click" />
              <TextBox x:Name="MeterColorBox" Margin="0" />
            </DockPanel>
            <TextBlock Text="時計文字色 (HEX)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right" Width="70" Margin="6,0,0,0" Content="選択" Click="PickClockTextColor_Click" />
              <TextBox x:Name="ClockTextColorBox" Margin="0" />
            </DockPanel>
            <TextBlock Text="モード文字色 (HEX)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right" Width="70" Margin="6,0,0,0" Content="選択" Click="PickModeTextColor_Click" />
              <TextBox x:Name="ModeTextColorBox" Margin="0" />
            </DockPanel>

            <TextBlock Margin="0,8,0,0" FontWeight="SemiBold" Text="時計フォント" />
            <TextBlock Text="タイマー表示に使うフォント" />
            <ComboBox x:Name="ClockFontCombo"
                      Margin="0,4,0,8"
                      IsEditable="True"
                      IsTextSearchEnabled="True" />
            <Button Width="220"
                    Margin="0,4,0,0"
                    Content="表示設定を初期値に戻す"
                    Click="ResetDisplayDefaults_Click" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <TabItem Header="タグ">
        <Grid Margin="14">
          <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>

          <ListBox x:Name="TagListBox"
                   Grid.Row="0"
                   MinHeight="220"
                   SelectionChanged="TagListBox_SelectionChanged" />

          <StackPanel Grid.Row="1" Margin="0,10,0,0">
            <TextBlock Text="タグ名" />
            <TextBox x:Name="TagNameBox" />
            <TextBlock Text="軸" />
            <ComboBox x:Name="TagAxisCombo" Margin="0,4,0,8" />
            <TextBlock Text="色 (HEX)" />
            <DockPanel Margin="0,4,0,8">
              <Button DockPanel.Dock="Right"
                      Width="70"
                      Margin="6,0,0,0"
                      Content="選択"
                      Click="PickTagColor_Click" />
              <TextBox x:Name="TagColorBox" Margin="0" />
            </DockPanel>
          </StackPanel>

          <WrapPanel Grid.Row="2" Margin="0,8,0,0" HorizontalAlignment="Left">
            <Button Width="80" Margin="0,0,6,0" Content="新規" Click="NewTag_Click" />
            <Button Width="100" Margin="0,0,6,0" Content="追加/更新" Click="AddOrUpdateTag_Click" />
            <Button Width="80" Margin="0,0,6,0" Content="削除" Click="DeleteTag_Click" />
            <Button Width="120" Content="アーカイブ切替" Click="ToggleArchiveTag_Click" />
          </WrapPanel>
        </Grid>
      </TabItem>
    </TabControl>
  </DockPanel>
</Window>
